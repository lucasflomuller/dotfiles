##### ── Modern Spacious Look ─────────────────────────────────────────────

# ═══════════════════════════════════════════════════════════════════════
# PLUGIN MANAGER (TPM)
# ═══════════════════════════════════════════════════════════════════════

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'tmux-plugins/tmux-open'

# Plugin settings
# tmux-continuum: auto-save every 15 minutes
set -g @continuum-save-interval '15'
# tmux-continuum: auto-restore on tmux start
set -g @continuum-restore 'on'
# tmux-resurrect: restore vim sessions too
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'
# tmux-resurrect: capture pane contents
set -g @resurrect-capture-pane-contents 'on'
# tmux-fzf: launch with prefix + F
TMUX_FZF_LAUNCH_KEY="F"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

# ═══════════════════════════════════════════════════════════════════════
# VISUAL DESIGN - Clean, spacious, with helpful information
# ═══════════════════════════════════════════════════════════════════════

# Color Palette (High Contrast)
# Background: #0d0d0d (very dark)
# Surface:    #1a1a1a (elevated elements)
# Overlay:    #3a3a3a (borders)
# Text:       #ffffff (bright white)
# Subtext:    #a0a0a0 (dimmed text)
# Blue:       #5eb3f6 (bright blue accents)
# Yellow:     #ffd700 (gold/yellow highlights)
# Mauve:      #d291e4 (bright purple)

# ═══════════════════════════════════════════════════════════════════════
# PANE BORDERS & TITLES
# ═══════════════════════════════════════════════════════════════════════

set -g pane-border-status top
set -g pane-border-format "#[fg=#5eb3f6,bg=#0d0d0d]  #{pane_index}  #[fg=#ffffff,bold]#{?pane_title,#{pane_title},#{pane_current_command}}  "
set -g pane-border-style "fg=#3a3a3a"
set -g pane-active-border-style "fg=#5eb3f6,bold"

# ═══════════════════════════════════════════════════════════════════════
# STATUS BAR - Spacious and informative
# ═══════════════════════════════════════════════════════════════════════

set -g status on
set -g status-interval 5
set -g status-justify left
set -g status-position bottom
set -g status-style "bg=#0d0d0d,fg=#ffffff"

# Left side: Session info with clear labeling
set -g status-left-length 100
set -g status-left "#[bg=#5eb3f6,fg=#000000,bold]  SESSION  #[bg=#1a1a1a,fg=#ffffff]  #S  #[bg=#0d0d0d]"

# Windows list: Clear distinction between active and inactive
setw -g window-status-format "#[fg=#a0a0a0,bg=#0d0d0d]  #I #W#{?window_flags, #{window_flags}, }  "
setw -g window-status-current-format "#[bg=#5eb3f6,fg=#000000,bold]  #I #W#[nobold]#{?window_flags, #{window_flags}, }  "
setw -g window-status-activity-style "fg=#ffd700,bg=#0d0d0d,bold"
setw -g window-status-separator ""

# Right side: Prefix/mode indicator + current path + helpful shortcuts + date/time
set -g status-right-length 200
set -g status-right "#{?client_prefix,#[bg=#ffd700]#[fg=#000000]#[bold]  ⌨  PREFIX  #[bg=#0d0d0d] ,}#{?pane_in_mode,#[bg=#d291e4]#[fg=#000000]#[bold]  ◰  COPY  #[bg=#0d0d0d] ,}#[fg=#a0a0a0] p/n prev/next  │  ? help  │  t title  #[bg=#1a1a1a,fg=#5eb3f6]  #{b:pane_current_path}  #[bg=#1a1a1a,fg=#ffffff] %a %d %b  #[bg=#5eb3f6,fg=#000000,bold]  %H:%M  "

# ═══════════════════════════════════════════════════════════════════════
# MODE & MESSAGES
# ═══════════════════════════════════════════════════════════════════════

set -g message-style "bg=#1a1a1a,fg=#ffffff,bold"
set -g message-command-style "bg=#1a1a1a,fg=#5eb3f6"
set -g mode-style "bg=#3a3a3a,fg=#ffffff,bold"

# ═══════════════════════════════════════════════════════════════════════
# CORE SETTINGS
# ═══════════════════════════════════════════════════════════════════════

# Mouse support
set -g mouse on

# Start numbering at 1 (easier keyboard access)
set -g base-index 1
setw -g pane-base-index 1

# Vi mode for copy-mode
setw -g mode-keys vi

# ═══════════════════════════════════════════════════════════════════════
# NAVIGATION - Vim-style + helpful pane selection
# ═══════════════════════════════════════════════════════════════════════

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Show pane numbers longer for easier selection
set -g display-panes-time 2000

# ═══════════════════════════════════════════════════════════════════════
# COPY MODE - Vim-style bindings
# ═══════════════════════════════════════════════════════════════════════

# Enter copy mode with prefix + [
bind [ copy-mode

# Vim-style selection and yanking in copy mode
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind -T copy-mode-vi Escape send-keys -X cancel

# Paste with prefix + ]
bind ] paste-buffer

# ═══════════════════════════════════════════════════════════════════════
# SESSION MANAGEMENT
# ═══════════════════════════════════════════════════════════════════════

# Quick session creation with name prompt
bind C command-prompt -p "New session name:" "new-session -s '%%'"

# Kill current session and switch to another (or create new if none exist)
bind X confirm-before -p "Kill session #S? (y/n)" "run-shell 'tmux switch-client -n \\\; kill-session -t \"#S\"'"

# Session switcher is built-in: prefix + s (shows tree view)

# ═══════════════════════════════════════════════════════════════════════
# TITLE MANAGEMENT
# ═══════════════════════════════════════════════════════════════════════

bind t command-prompt -I "#{?pane_title,#{pane_title},#{pane_current_command}}" \
  -p "Set pane title:" 'select-pane -T "%%"'
bind T 'select-pane -T ""'  # clear title

# ═══════════════════════════════════════════════════════════════════════
# ACTIVITY & NOTIFICATIONS
# ═══════════════════════════════════════════════════════════════════════

set -g visual-bell off
set -g bell-action any
set -g monitor-activity on
set -g activity-action other
set -g visual-activity off  # Disable activity messages, keep highlights
set -g visual-silence off

# ═══════════════════════════════════════════════════════════════════════
# SENSIBLE DEFAULTS
# ═══════════════════════════════════════════════════════════════════════

set -g allow-rename off
set -g renumber-windows on
set -g history-limit 200000
set -g set-clipboard on
set -g escape-time 0
set -g display-time 750
set -s repeat-time 1000
set -g exit-empty off

# ═══════════════════════════════════════════════════════════════════════
# RELOAD CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════

bind r source-file ~/.tmux.conf \; display-message "  Config reloaded!"
